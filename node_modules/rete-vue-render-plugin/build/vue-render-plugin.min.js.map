{"version":3,"file":"vue-render-plugin.min.js","sources":["../src/filters.js","../src/mixin.js","../src/index.js"],"sourcesContent":["import Vue from 'vue';\n\nVue.filter('kebab', (str) => {\n    const replace = s =>  s.toLowerCase().replace(/ /g, '-');\n\n    return Array.isArray(str) ?  str.map(replace) : replace(str);\n});","export default {\n    props: ['node', 'editor', 'bindSocket', 'bindControl'],\n    methods: {\n        inputs() {\n            return Array.from(this.node.inputs.values())\n        },\n        outputs() {\n            return Array.from(this.node.outputs.values())\n        },\n        controls() {\n            return Array.from(this.node.controls.values())\n        },\n        selected() {\n            return this.editor.selected.contains(this.node) ? 'selected' : '';\n        }\n    },\n    directives: {\n        socket: {\n            bind(el, binding, vnode) {\n                vnode.context.bindSocket(el, binding.arg, binding.value);\n            }\n        },\n        control: {\n            bind(el, binding, vnode) {\n                if (!binding.value) return;\n\n                vnode.context.bindControl(el, binding.value);\n            }\n        }\n    }\n}","import './filters';\nimport Node from './Node.vue';\nimport Socket from './Socket.vue';\nimport Vue from 'vue';\nimport mixin from './mixin';\n\nfunction createVue(el, vueComponent, vueProps) {\n    const app = new Vue({\n        render: h => h(vueComponent, { props: vueProps })\n    });\n\n    const nodeEl = document.createElement('div');\n\n    el.appendChild(nodeEl);\n    app.$mount(nodeEl);\n    \n    return app;\n}\n\nfunction createNode(editor, { el, node, component, bindSocket, bindControl }) {\n    const vueComponent = component.component || Node;\n    const vueProps = { ...component.props, node, editor, bindSocket, bindControl };\n    const app = createVue(el, vueComponent, vueProps);\n\n    node.vueContext = app.$children[0];\n\n    return app;\n}\n\nfunction createControl(editor, { el, control }) {\n    const vueComponent = control.component;\n    const vueProps = { ...control.props, getData: control.getData.bind(control), putData: control.putData.bind(control) };\n    const app = createVue(el, vueComponent, vueProps);\n\n    control.vueContext = app.$children[0];\n\n    return app;\n}\n\nconst update = (entity) => {\n    if (entity.vueContext)\n        entity.vueContext.$forceUpdate();\n}\n\nfunction install(editor, params) {\n    editor.on('rendernode', ({ el, node, component, bindSocket, bindControl }) => {\n        if (component.render && component.render !== 'vue') return;\n        node._vue = createNode(editor, { el, node, component, bindSocket, bindControl });\n        node.update = () => update(node);\n    });\n\n    editor.on('rendercontrol', ({ el, control }) => {\n        if (control.render && control.render !== 'vue') return;\n        control._vue = createControl(editor, { el, control });\n        control.update = () => update(control)\n    });\n\n    editor.on('connectioncreated connectionremoved', connection => {\n        update(connection.output.node)\n        update(connection.input.node)\n    });\n\n    editor.on('nodeselected', () => {\n        editor.nodes.map(update);\n    });\n}\n\nexport default {\n    name: 'vue-render',\n    install,\n    mixin,\n    Node,\n    Socket\n}\n"],"names":["filter","str","replace","s","toLowerCase","Array","isArray","map","from","this","node","inputs","values","outputs","controls","editor","selected","contains","el","binding","vnode","context","bindSocket","arg","value","bindControl","createVue","vueComponent","vueProps","app","Vue","h","props","nodeEl","document","createElement","appendChild","$mount","update","entity","vueContext","$forceUpdate","params","on","component","render","_vue","Node","$children","control","getData","bind","putData","connection","output","input","nodes"],"mappings":";;;;;k2MAEIA,OAAO,QAAS,SAACC,OACXC,EAAU,mBAAMC,EAAEC,cAAcF,QAAQ,KAAM,aAE7CG,MAAMC,QAAQL,GAAQA,EAAIM,IAAIL,GAAWA,EAAQD,WCL7C,OACJ,CAAC,OAAQ,SAAU,aAAc,uBAC/B,0BAEMI,MAAMG,KAAKC,KAAKC,KAAKC,OAAOC,qCAG5BP,MAAMG,KAAKC,KAAKC,KAAKG,QAAQD,sCAG7BP,MAAMG,KAAKC,KAAKC,KAAKI,SAASF,sCAG9BH,KAAKM,OAAOC,SAASC,SAASR,KAAKC,MAAQ,WAAa,gBAG3D,QACA,eACCQ,EAAIC,EAASC,KACRC,QAAQC,WAAWJ,EAAIC,EAAQI,IAAKJ,EAAQK,iBAGjD,eACAN,EAAIC,EAASC,GACTD,EAAQK,SAEPH,QAAQI,YAAYP,EAAIC,EAAQK,gvSCpB7CE,EAAUR,EAAIS,EAAcC,OAC3BC,EAAM,IAAIC,EAAI,QACR,mBAAKC,EAAEJ,EAAc,CAAEK,MAAOJ,OAGpCK,EAASC,SAASC,cAAc,gBAEnCC,YAAYH,KACXI,OAAOJ,GAEJJ,EAuBX,IAAMS,EAAS,SAACC,GACRA,EAAOC,YACPD,EAAOC,WAAWC,sBA0BX,MACL,qBAxBV,SAAiB1B,EAAQ2B,KACdC,GAAG,aAAc,gBA1BR5B,IAAUG,EAAIR,EAAMkC,EAAWtB,EAAYG,EAGrDI,EAuBqBX,IAAAA,GAAIR,IAAAA,KAAMkC,IAAAA,UAAWtB,IAAAA,WAAYG,IAAAA,YACpDmB,EAAUC,QAA+B,QAArBD,EAAUC,WAC7BC,MA5BO/B,EA4BWA,EA5BDG,KA4BS,CAAEA,KAAIR,OAAMkC,YAAWtB,aAAYG,gBA5B5CP,GAAIR,IAAAA,KAAMkC,IAAAA,UAAWtB,IAAAA,WAAYG,IAAAA,YAGrDI,EAAMH,EAAUR,EAFD0B,EAAUA,WAAaG,OACtBH,EAAUZ,OAAOtB,OAAMK,SAAQO,aAAYG,mBAG5De,WAAaX,EAAImB,UAAU,GAEzBnB,KAsBES,OAAS,kBAAMA,EAAO5B,SAGxBiC,GAAG,gBAAiB,kBAtBEzB,EAAI+B,EAG3BpB,EAmBwBX,IAAAA,GAAI+B,IAAAA,QAC1BA,EAAQJ,QAA6B,QAAnBI,EAAQJ,WACtBC,MAxBiB5B,KAwBY,CAAEA,KAAI+B,YAxBlB/B,GAAI+B,IAAAA,QAG3BpB,EAAMH,EAAUR,EAFD+B,EAAQL,eACPK,EAAQjB,OAAOkB,QAASD,EAAQC,QAAQC,KAAKF,GAAUG,QAASH,EAAQG,QAAQD,KAAKF,QAGnGT,WAAaX,EAAImB,UAAU,GAE5BnB,KAkBKS,OAAS,kBAAMA,EAAOW,SAG3BN,GAAG,sCAAuC,cACtCU,EAAWC,OAAO5C,QAClB2C,EAAWE,MAAM7C,UAGrBiC,GAAG,eAAgB,aACfa,MAAMjD,IAAI+B"}